- name: Get latest release name
  uri:
    url: https://storage.googleapis.com/kubernetes-release/release/stable.txt
    return_content: true
  register: kubectl_release


- name: Get the binary
  become: true
  get_url:
    url: 'https://storage.googleapis.com/kubernetes-release/release/{{ kubectl_release.content | trim }}/bin/linux/amd64/kubectl'
    dest: /usr/bin/kubectl
    remote_src: True
    owner: root
    group: root
    mode: 0755
